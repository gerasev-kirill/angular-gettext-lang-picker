(function(){angular.module("ui.gettext.langPicker",["uiFlag","ui.bootstrap","ui.router"])}).call(this),function(){angular.module("ui.gettext.langPicker").directive("uiLangPicker",function(){return{restrict:"E",scope:{"default":"=?",ngDisabled:"=?"},controller:["$scope","$langPicker",function(a,b){return a.$langPicker=b,b.currentLang||b.detectLanguage(a["default"]),a.countryFlagCode=function(a){return b.languageCodeToCountryCodeMapping[a]?b.languageCodeToCountryCodeMapping[a]:a}}],template:'\n<div class="btn-group" uib-dropdown="uib-dropdown">\n  <button class="btn btn-default" type="button" uib-dropdown-toggle="uib-dropdown-toggle" ng-disabled="ngDisabled">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span class="caret" style="margin-left:3px;"></span>\n  </button>\n  <ul uib-dropdown-menu="" role="menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</div>'}})}.call(this),angular.module("ui.gettext.langPicker").directive("uiLangPickerForNavbar",["$langPicker",function(a){return{restrict:"A",replace:!0,controller:["$scope","$attrs","$element","$langPicker","$state",function(a,b,c,d,e){return a.$state=e,a.$langPicker=d,a.attrs=b,d.currentLang||d.detectLanguage(),a.countryFlagCode=function(a){return d.languageCodeToCountryCodeMapping[a]?d.languageCodeToCountryCodeMapping[a]:a},a.$watch("$langPicker.languageList",function(a,b){var d;d=Object.keys(a||{}),d.length<=1?c.addClass("ng-hide"):c.removeClass("ng-hide")},!0)}],template:'\n<li class="dropdown" uib-dropdown=""><a class="dropdown-toggle" uib-dropdown-toggle="" style="cursor:pointer;" ng-disabled="attrs.disabled">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span class="caret" style="margin-left:3px;"></span></a>\n  <ul class="dropdown-menu" uib-dropdown-menu="" role="menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</li>'}}]),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("ui.gettext.langPicker").service("$langPicker",["$injector","$rootScope","gettextCatalog",function(b,c,d){var e=this;return this._lang_loaded=[],this.languageList={},this.languageCodeToCountryCodeMapping={en:"gb",cs:"cz",da:"dk"},this.remoteCatalogUrl="",this.currentLang="",this.setCurrentLanguage=function(f){var g,h,i,j,k;if(a.call(Object.keys(e.languageList),f)<0)throw h=Object.keys(e.languageList),{message:"Unknown lang '"+f+"'. Allowed are:  '"+h.join(", ")+"'."};j=angular.copy(e.currentLang),i=angular.copy(f),e.currentLang=f,a.call(e._lang_loaded,f)<0&&(d.loadRemote(e.remoteCatalogUrl+f+".json"),e._lang_loaded.push(f)),d.setCurrentLanguage(f),g=b.get("$state"),g.current.name&&(k=g.params||{},k.lang=f,g.go(g.current.name,k,{notify:!1,reload:!1}),c.$emit("$langPickerLangChanged",i,j))},this.setLanguageList=function(a){return e.languageList=angular.copy(a)},this.setLanguageRemoteUrl=function(a){return e.remoteCatalogUrl=angular.copy(a)},this.getCurrentLanguageName=function(){var b;return b=e.currentLang,a.call(Object.keys(e.languageList),b)<0?"":e.languageList[e.currentLang]},this.detectLanguage=function(c){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(f=b.get("$state"),d=b.get("$location"),g=Object.keys(e.languageList),n=d.url(),s=f.get(),o=0,q=s.length;o<q;o++)if(m=s[o],m.$$state&&(l=m.$$state(),k=l.url.exec(n)||l.url.exec(n.split("?")[0])||{},k.lang&&(t=k.lang,a.call(g,t)>=0)))return e.setCurrentLanguage(k.lang);for(j=window.navigator.languages||[window.navigator.language||window.navigator.userLanguage],p=0,r=j.length;p<r;p++)if(h=j[p],h=h.split("-")[0],a.call(g,h)>=0)return e.setCurrentLanguage(h);i=a.call(g,c)>=0?c:g[0],e.setCurrentLanguage(i)},this}])}.call(this),function(){angular.module("ui.gettext.langPicker").config(["$provide","$stateProvider",function(a,b){return a.decorator("$state",["$delegate","$langPicker",function(a,b){var c,d,e;return e=a,c=e.go,e.go=function(a,d,e){return d=d||{},d.lang=b.currentLang,c(a,d,e)},d=e.href,e.href=function(a,b,c){var e;return b=b||{},e=d(a,b,c),!b.lang&&e&&(e=e.replace("//","/")),e},e}]),b.decorator("parent",function(a,b){return a.self.$$state=function(){return a},b(a)})}])}.call(this);