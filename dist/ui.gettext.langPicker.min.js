(function(){angular.module("ui.gettext.langPicker",["uiFlag","ui.bootstrap","ui.router"])}).call(this),function(){angular.module("ui.gettext.langPicker").directive("uiLangPicker",["$langPicker",function(a){return{restrict:"E",scope:{"default":"=?",ngDisabled:"=?"},controller:["$scope",function(b){return b.$langPicker=a,a.currentLang||a.detectLanguage(),b.countryFlagCode=function(a){return"en"===a?"gb":a}}],template:'\n<div uib-dropdown="uib-dropdown" class="btn-group">\n  <button type="button" uib-dropdown-toggle="uib-dropdown-toggle" ng-disabled="ngDisabled" class="btn btn-default">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span style="margin-left:3px;" class="caret"></span>\n  </button>\n  <ul uib-dropdown-menu="" role="menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</div>'}}])}.call(this),function(){angular.module("ui.gettext.langPicker").directive("uiLangPickerForNavbar",["$langPicker",function(a){return{restrict:"A",replace:!0,link:function(b,c,d){return b.$langPicker=a,b.attrs=d,a.currentLang||a.detectLanguage(),b.countryFlagCode=function(a){return"en"===a?"gb":a}},template:'\n<li uib-dropdown="" class="dropdown"><a uib-dropdown-toggle="" style="cursor:pointer;" ng-disabled="attrs.disabled" class="dropdown-toggle">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span style="margin-left:3px;" class="caret"></span></a>\n  <ul uib-dropdown-menu="" role="menu" class="dropdown-menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</li>'}}])}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("ui.gettext.langPicker").service("$langPicker",["$injector","gettextCatalog",function(b,c){return this._lang_loaded=[],this.languageList={},this.remoteCatalogUrl="",this.currentLang="",this.setCurrentLanguage=function(d){return function(e){var f,g,h;if(a.call(Object.keys(d.languageList),e)<0)throw g=Object.keys(d.languageList),{message:"Unknown lang '"+e+"'. Allowed are:  '"+g.join(", ")+"'."};d.currentLang=e,a.call(d._lang_loaded,e)<0&&(c.loadRemote(d.remoteCatalogUrl+e+".json"),d._lang_loaded.push(e)),c.setCurrentLanguage(e),f=b.get("$state"),f.current.name&&(h=f.params||{},h.lang=e,f.go(f.current.name,h,{notify:!1,reload:!1}))}}(this),this.setLanguageList=function(a){return function(b){return a.languageList=angular.copy(b)}}(this),this.setLanguageRemoteUrl=function(a){return function(b){return a.remoteCatalogUrl=angular.copy(b)}}(this),this.getCurrentLanguageName=function(b){return function(){var c;return c=b.currentLang,a.call(Object.keys(b.languageList),c)<0?"":b.languageList[b.currentLang]}}(this),this.detectLanguage=function(c){return function(){var d,e,f,g,h,i,j,k,l,m,n,o,p;for(e=b.get("$state"),d=b.get("$location"),k=d.url(),p=e.get(),l=0,n=p.length;n>l;l++)if(j=p[l],j.$$state&&(i=j.$$state(),h=i.url.exec(k)||{},h.lang))return c.setCurrentLanguage(h.lang);for(g=window.navigator.languages||[window.navigator.language||window.navigator.userLanguage],m=0,o=g.length;o>m;m++)if(f=g[m],f=f.split("-")[0],a.call(Object.keys(c.languageList),f)>=0){c.setCurrentLanguage(f);break}}}(this),this}])}.call(this),function(){angular.module("ui.gettext.langPicker").config(["$provide","$stateProvider",function(a,b){return a.decorator("$state",["$delegate","$langPicker",function(a,b){var c,d,e;return e=a,e.baseGo=e.go,c=function(a,c,d){return c=c||{},c.lang=b.currentLang,this.baseGo(a,c,d)},e.go=c,e.baseHref=e.href,d=function(a,b,c){var d;return b=b||{},d=this.baseHref(a,b,c),!b.lang&&d&&(d=d.replace("//","/")),d},e.href=d,a}]),b.decorator("parent",function(a,b){return a.self.$$state=function(){return a},b(a)})}])}.call(this);