(function(){angular.module("ui.gettext.langPicker",["uiFlag","ui.bootstrap","ui.router"])}).call(this),function(){angular.module("ui.gettext.langPicker").directive("uiLangPicker",function(){return{restrict:"E",scope:{"default":"=?",ngDisabled:"=?"},controller:["$scope","$langPicker",function(a,b){return a.$langPicker=b,b.currentLang||b.detectLanguage(a["default"]),a.countryFlagCode=function(a){return b.languageCodeToCountryCodeMapping[a]?b.languageCodeToCountryCodeMapping[a]:a}}],template:'\n<div class="btn-group" uib-dropdown="uib-dropdown">\n  <button class="btn btn-default" type="button" uib-dropdown-toggle="uib-dropdown-toggle" ng-disabled="ngDisabled">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span class="caret" style="margin-left:3px;"></span>\n  </button>\n  <ul uib-dropdown-menu="" role="menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</div>'}})}.call(this),angular.module("ui.gettext.langPicker").directive("uiLangPickerForNavbar",["$langPicker",function(a){return angular.element(document).find("head").prepend('<style type="text/css">\n    li.force-ng-hide[ui-lang-picker-for-navbar]{\n        display: none;\n    }\n</style>'),{restrict:"A",replace:!0,controller:["$scope","$attrs","$element","$langPicker","$state",function(a,b,c,d,e){return a.$state=e,a.$langPicker=d,a.attrs=b,d.currentLang||d.detectLanguage(),a.countryFlagCode=function(a){return d.languageCodeToCountryCodeMapping[a]?d.languageCodeToCountryCodeMapping[a]:a},a.$watch("$langPicker.languageList",function(a,b){var e;e=Object.keys(a||{}),e.length<=1?c.addClass("force-ng-hide"):c.removeClass("force-ng-hide"),d.currentLang&&!e.includes(d.currentLang)&&d.detectLanguage()},!0)}],template:'\n<li class="dropdown" uib-dropdown=""><a class="dropdown-toggle" uib-dropdown-toggle="" style="cursor:pointer;" ng-disabled="attrs.disabled">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span class="caret" style="margin-left:3px;"></span></a>\n  <ul class="dropdown-menu" uib-dropdown-menu="" role="menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</li>'}}]),function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a={cs:"cz"},angular.module("ui.gettext.langPicker").service("$langPicker",["$injector","$rootScope","gettextCatalog",function(c,d,e){var f;return f=[],this._lang_loaded=[],this.languageList={},this.languageCodeToCountryCodeMapping={en:"gb",cs:"cz",da:"dk"},this.remoteCatalogUrl="",this.setIgnoreLoadRemoteLanguages=function(a){f=angular.copy(a)},this.currentLang="",this.setCurrentLanguage=function(a){return function(g){var h,i,j,k,l;if(b.call(Object.keys(a.languageList),g)<0)throw i=Object.keys(a.languageList),{message:"Unknown lang '"+g+"'. Allowed are:  '"+i.join(", ")+"'."};k=angular.copy(a.currentLang),j=angular.copy(g),a.currentLang=g,b.call(a._lang_loaded,g)<0&&b.call(f,g)<0&&(e.loadRemote(a.remoteCatalogUrl+g+".json"),a._lang_loaded.push(g)),e.setCurrentLanguage(g),h=c.get("$state"),h.current.name&&(l=h.params||{},l.lang=g,h.go(h.current.name,l,{notify:!1,reload:!1}),d.$emit("$langPickerLangChanged",j,k))}}(this),this.setLanguageList=function(a){return function(b){return a.languageList=angular.copy(b)}}(this),this.setLanguageRemoteUrl=function(a){return function(b){return a.remoteCatalogUrl=angular.copy(b)}}(this),this.getCurrentLanguageName=function(a){return function(){var c;return c=a.currentLang,b.call(Object.keys(a.languageList),c)<0?"":a.languageList[a.currentLang]}}(this),this.detectLanguage=function(d){return function(e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(g=c.get("$state"),f=c.get("$location"),h=Object.keys(d.languageList),v=f.url(),q=g.get(),i=0,n=q.length;i<n;i++)if(u=q[i],u.$$state&&(t=u.$$state(),t.url&&(p=t.url.exec(v)||t.url.exec(v.split("?")[0])||{},p.lang&&(r=p.lang,b.call(h,r)>=0))))return d.setCurrentLanguage(p.lang);for(m=window.navigator.languages||[window.navigator.language||window.navigator.userLanguage],j=0,o=m.length;j<o;j++){if(k=m[j],k=k.split("-")[0],a[k]&&(s=a[k],b.call(h,s)>=0))return d.setCurrentLanguage(a[k]);if(b.call(h,k)>=0)return d.setCurrentLanguage(k)}l=b.call(h,e)>=0?e:h[0],d.setCurrentLanguage(l)}}(this),this}])}.call(this),angular.module("ui.gettext.langPicker").config(["$provide","$stateProvider",function(a,b){return a.decorator("$state",["$delegate","$langPicker",function(a,b){var c,d,e;return e=a,c=e.go,e.go=function(a,d,e){return d=d||{},d.lang||(d.lang=b.currentLang),c(a,d,e)},d=e.href,e.href=function(a,b,c){var e;return b=b||{},e=d(a,b,c),!b.lang&&e&&(e=e.replace("//","/")),e},e}]),b.decorator("parent",function(a,b){return a.self.$$state=function(){return a},b(a)})}]);