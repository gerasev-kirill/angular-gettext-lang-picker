(function(){angular.module("ui.gettext.langPicker",["uiFlag","ui.bootstrap","ui.router"])}).call(this),function(){angular.module("ui.gettext.langPicker").directive("uiLangPicker",["$langPicker",function(a){return{restrict:"E",scope:{"default":"=?",ngDisabled:"=?"},controller:["$scope",function(b){return b.$langPicker=a,a.currentLang||a.detectLanguage(),b.countryFlagCode=function(a){return"en"===a?"gb":a}}],template:'\n<div uib-dropdown="uib-dropdown" class="btn-group">\n  <button type="button" uib-dropdown-toggle="uib-dropdown-toggle" ng-disabled="ngDisabled" class="btn btn-default">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span style="margin-left:3px;" class="caret"></span>\n  </button>\n  <ul uib-dropdown-menu="" role="menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</div>'}}])}.call(this),function(){angular.module("ui.gettext.langPicker").directive("uiLangPickerForNavbar",["$langPicker",function(a){return{restrict:"A",replace:!0,link:function(b,c,d){return b.$langPicker=a,b.attrs=d,a.currentLang||a.detectLanguage(),b.countryFlagCode=function(a){return"en"===a?"gb":a}},template:'\n<li uib-dropdown="" class="dropdown"><a uib-dropdown-toggle="" style="cursor:pointer;" ng-disabled="attrs.disabled" class="dropdown-toggle">\n    <flag country="{{countryFlagCode($langPicker.currentLang)}}"></flag>{{$langPicker.getCurrentLanguageName() || \'Language\'}}<span style="margin-left:3px;" class="caret"></span></a>\n  <ul uib-dropdown-menu="" role="menu" class="dropdown-menu">\n    <li role="menuitem" ng-repeat="(lang_code, lang_name) in $langPicker.languageList" ng-click="$langPicker.setCurrentLanguage(lang_code)" ng-class="{\'active\': lang_code==$langPicker.currentLang}"><a href="javascript: void 0">   \n        <flag country="{{countryFlagCode(lang_code)}}"></flag>{{lang_name}}</a></li>\n  </ul>\n</li>'}}])}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("ui.gettext.langPicker").service("$langPicker",["$injector","$rootScope","gettextCatalog",function(b,c,d){return this._lang_loaded=[],this.languageList={},this.remoteCatalogUrl="",this.currentLang="",this.setCurrentLanguage=function(e){return function(f){var g,h,i,j,k;if(a.call(Object.keys(e.languageList),f)<0)throw h=Object.keys(e.languageList),{message:"Unknown lang '"+f+"'. Allowed are:  '"+h.join(", ")+"'."};j=angular.copy(e.currentLang),i=angular.copy(f),e.currentLang=f,a.call(e._lang_loaded,f)<0&&(d.loadRemote(e.remoteCatalogUrl+f+".json"),e._lang_loaded.push(f)),d.setCurrentLanguage(f),g=b.get("$state"),g.current.name&&(k=g.params||{},k.lang=f,g.go(g.current.name,k,{notify:!1,reload:!1}),c.$emit("$langPickerLangChanged",i,j))}}(this),this.setLanguageList=function(a){return function(b){return a.languageList=angular.copy(b)}}(this),this.setLanguageRemoteUrl=function(a){return function(b){return a.remoteCatalogUrl=angular.copy(b)}}(this),this.getCurrentLanguageName=function(b){return function(){var c;return c=b.currentLang,a.call(Object.keys(b.languageList),c)<0?"":b.languageList[b.currentLang]}}(this),this.detectLanguage=function(c){return function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(e=b.get("$state"),d=b.get("$location"),q=d.url(),n=e.get(),f=0,k=n.length;k>f;f++)if(p=n[f],p.$$state&&(o=p.$$state(),m=o.url.exec(q)||o.url.exec(q.split("?")[0])||{},m.lang))return c.setCurrentLanguage(m.lang);for(j=window.navigator.languages||[window.navigator.language||window.navigator.userLanguage],g=0,l=j.length;l>g;g++)if(i=j[g],i=i.split("-")[0],a.call(Object.keys(c.languageList),i)>=0)return c.setCurrentLanguage(i);h=Object.keys(c.languageList),c.setCurrentLanguage(h[0])}}(this),this}])}.call(this),function(){angular.module("ui.gettext.langPicker").config(["$provide","$stateProvider",function(a,b){return a.decorator("$state",["$delegate","$langPicker",function(a,b){var c,d,e;return e=a,c=e.go,e.go=function(a,d,e){return d=d||{},d.lang=b.currentLang,c(a,d,e)},d=e.href,e.href=function(a,b,c){var e;return b=b||{},e=d(a,b,c),!b.lang&&e&&(e=e.replace("//","/")),e},e}]),b.decorator("parent",function(a,b){return a.self.$$state=function(){return a},b(a)})}])}.call(this);